define(["../core","../core/init","../deferred"],function(t){function e(){document.removeEventListener("DOMContentLoaded",e,!1),window.removeEventListener("load",e,!1),t.ready()}var n;t.fn.ready=function(e){return t.ready.promise().done(e),this},t.extend({isReady:!1,readyWait:1,holdReady:function(e){e?t.readyWait++:t.ready(!0)},ready:function(e){(e===!0?--t.readyWait:t.isReady)||(t.isReady=!0,e!==!0&&--t.readyWait>0||(n.resolveWith(document,[t]),t.fn.triggerHandler&&(t(document).triggerHandler("ready"),t(document).off("ready"))))}}),t.ready.promise=function(i){return n||(n=t.Deferred(),"complete"===document.readyState?setTimeout(t.ready):(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1))),n.promise(i)},t.ready.promise()});